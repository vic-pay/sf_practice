# Проектная работа 6.  Тестирование и тестовые-среды (стенды)

## Задание

- Создать на GitHub профиль и репозиторий под названием «sf_practice», в нем создать директорию с названием «6».
- Используя Я.Облако, создать виртуальную машину со следующими характеристиками: 2vCPU 4GB RAM 30 GB HDD.
- Настроить на ней связку VirtualBox + Vagrant.
- Создать пустой файл на файловой системе.
- Создать Vagrantfile, при использовании которого будет создаваться ВМ под управлением Ubuntu 18.04.
- Настроить Vagrantfile таким образом, чтобы на эту машину при ее создании устанавливались python3- и python3-pip-пакеты, а также Python-библиотеки psycopg2 (для подключения к PostgreSQL СУБД) и Django (для работы с фронтэндом).
- Дополнить Vagrantfile командой копирования созданного нами пустого файла на файловую систему созданной машины (в будущем при реальной работе с тестовым окружением, разработчики будут вместо этого пустого файла копировать на создаваемую ВМ свои скрипты и запускать их там).
- Отправьте этот Vagrantfile в созданный в п.1 репозиторий в директорию «6».
- Отправьте ментору ссылку на Vagrantfile в вашем репозитории.

## Описание выбранного решения
Создана конфигурация Vagrant, устанавливающая postgresql 8.4 в контейнер LXC
(нет возможности использовать virtualbox на рабочем железе из-за несовместимости с WSL).
Vagrant файл создает контейнер и вызывает ansible-playbook
плейбук устанавливает нужные пакеты и копирует файл blankfile из корня проекта в контейнер в директорию /tmp

## Системные требования 
Решение разработано для ОС Ubuntu.

## Использование 
Для использования необходимо:
1) Установить необходимые пакеты 

*sudo apt-get install lxd lxc-utils lxc-templates vagrant vagrant-lxc ansible*

2) Инициализировать LXD (если он до этого не был инициализирован)

*sudo lxd init*

3) Добавить пользователя в группу (после выполнения действия нужно выйти/войти в систему)

*sudo usermod -a -G lxd {пользователь}*

3) Скопировать репозиторий

*git clone https://github.com/vic-pay/sf_practice*

4) Перейти в репозиторий и запустить варгант

*cd sf_practice*
*vagrant up*

## Возможные проблемы

Иногда сразу после старта контейнера стартует обновление кэша apt. 
В этом случае необходимо подождать и выполнить

*vagrant provision*